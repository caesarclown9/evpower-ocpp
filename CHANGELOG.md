# Changelog

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ EvPower Backend –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
–∏ –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è [Semantic Versioning](https://semver.org/lang/ru/).

---

## [1.4.1] - 2025-11-26 - FIX PHONE LOGIN üêõ

### üêõ Fixed (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

#### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω phone login —á–µ—Ä–µ–∑ /api/v1/auth/login
- **–§–∞–π–ª:** `backend/app/api/v1/auth/session.py:267-296`
- **–ü—Ä–æ–±–ª–µ–º–∞:**
  - –ü—Ä–∏ –ª–æ–≥–∏–Ω–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º (+996705459745) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–ª 401 "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å"
  - Backend –∏—Å–∫–∞–ª email –≤ `auth.users.phone`, –Ω–æ —ç—Ç–æ –ø–æ–ª–µ –±—ã–ª–æ NULL
  - Supabase –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `grant_type=password` —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º (—Ç–æ–ª—å–∫–æ —Å email)
- **–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
  - –ó–∞–ø—Ä–æ—Å: `SELECT email FROM auth.users WHERE phone = '+996705459745'`
  - –†–µ–∑—É–ª—å—Ç–∞—Ç: NULL (–ø–æ–ª–µ `auth.users.phone` –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)
  - –¢–µ–ª–µ—Ñ–æ–Ω —Ö—Ä–∞–Ω–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –≤ `raw_user_meta_data` –∏ `public.clients`
- **–†–µ—à–µ–Ω–∏–µ:**
  - –ò–∑–º–µ–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ `SELECT email FROM public.clients WHERE phone = :phone`
  - –¢–∞–±–ª–∏—Ü–∞ `public.clients` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º `phone`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
    - "Login attempt with email" - –ª–æ–≥–∏–Ω –ø–æ email
    - "Phone lookup successful" - —É—Å–ø–µ—à–Ω–æ–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ email –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
    - "Phone not found in database" - —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
  - Phone login —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Tested with:** phone `+996705459745` ‚Üí email `caesarclown9@gmail.com` ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## [1.4.0] - 2025-11-26 - FRONTEND INTEGRATION IMPROVEMENTS üîó

### ‚ú® Added (–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

#### 1. GET /api/v1/balance/get - –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π endpoint –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
- **–§–∞–π–ª:** `backend/app/api/v1/balance/balance.py:66-96`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π endpoint `/api/v1/balance/get` –±–µ–∑ `client_id` –≤ URL
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç `client_id` –∏–∑ —Ç–æ–∫–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`request.state.client_id`)
  - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É `get_client_balance()`
  - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ docstring
- **–î–æ:** `GET /api/v1/balance/{client_id}` (—Ç—Ä–µ–±–æ–≤–∞–ª –ø–µ—Ä–µ–¥–∞—á—É ID)
- **–ü–æ—Å–ª–µ:** `GET /api/v1/balance/get` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

#### 2. GET /api/v1/auth/me - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π REST endpoint
- **–§–∞–π–ª:** `backend/app/api/v1/auth/session.py:176-229`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π REST endpoint `/auth/me` (–∞–ª–∏–∞—Å –¥–ª—è `/profile`)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (client_id, email, phone, name, balance, status)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `client_id` –∏–∑ —Ç–æ–∫–µ–Ω–∞
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 401 (–Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω) –∏ 404 (–Ω–µ –Ω–∞–π–¥–µ–Ω)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ REST API —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üîß Changed (–ò–∑–º–µ–Ω–µ–Ω–∏—è)

#### 3. –ê–¥–∞–ø—Ç–∞—Ü–∏—è cookies –¥–ª—è localhost development
- **–§–∞–π–ª—ã:**
  - `backend/app/api/v1/auth/session.py:63-105` - —Ñ—É–Ω–∫—Ü–∏—è `_cookie_params()`
  - `backend/app/api/v1/auth/session.py:136-167` - endpoint `/csrf`
  - `backend/app/api/v1/auth/session.py:276-277` - endpoint `/login`
  - `backend/app/api/v1/auth/session.py:324-325` - endpoint `/refresh`
- **–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ localhost –ø–æ `origin` –∑–∞–≥–æ–ª–æ–≤–∫—É
  - **Localhost (HTTP):** `SameSite=Lax, Secure=False` - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç HTTP
  - **Production (HTTPS):** `SameSite=None, Secure=True` - —Ç—Ä–µ–±—É–µ—Ç HTTPS
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `request` –≤ `_cookie_params()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `request`
- **–ü—Ä–æ–±–ª–µ–º–∞:** Cookies —Å `SameSite=None; Secure` –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ localhost (HTTP)
- **–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ cookie
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ HTTPS
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üìù Documentation (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

#### 4. –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è endpoints
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ docstrings –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö endpoints
- –û–ø–∏—Å–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ª–æ–≥–∏–∫–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è localhost
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–π
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### ü§ù Integration (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

#### 5. Frontend-Backend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **Context:** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å PWA —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ:**
  - –ê–Ω–∞–ª–∏–∑–∞ frontend –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã
  - –í–æ–ø—Ä–æ—Å–æ–≤ frontend-–∫–æ–º–∞–Ω–¥—ã
  - –¢—Ä–µ–±–æ–≤–∞–Ω–∏–π cookie-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

---

## [1.3.0] - 2025-11-18 - PUSH NOTIFICATIONS üì±

### ‚ú® Added (–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

#### 1. Web Push Notifications –¥–ª—è PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–§–∞–π–ª—ã:**
  - `backend/app/services/push_service.py` - —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - `backend/app/api/v1/notifications/subscriptions.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
  - `backend/app/api/v1/notifications/vapid.py` - VAPID public key endpoint
  - `backend/migrations/003_add_push_notifications.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Web Push API (RFC 8030, RFC 8292)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è VAPID –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
  - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `pywebpush==1.14.0`
  - –¢–∞–±–ª–∏—Ü–∞ `push_subscriptions` —Å RLS policies
  - 3 –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö subscriptions (410 Gone, 404 Not Found)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** PWA –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

#### 2. API Endpoints –¥–ª—è Push Notifications
- **`POST /api/v1/notifications/subscribe`**
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è push subscription –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞
  - Upsert –ª–æ–≥–∏–∫–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—Å–ª–∏ exists)
  - –¢—Ä–µ–±—É–µ—Ç—Å—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ client –∏ owner —Ç–∏–ø–æ–≤
- **`POST /api/v1/notifications/unsubscribe`**
  - –£–¥–∞–ª–µ–Ω–∏–µ push subscription
  - –¢—Ä–µ–±—É–µ—Ç—Å—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **`GET /api/v1/notifications/vapid-public-key`**
  - –ü–æ–ª—É—á–µ–Ω–∏–µ VAPID public key
  - –ü—É–±–ª–∏—á–Ω—ã–π endpoint (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- **`POST /api/v1/notifications/test`**
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - –¢—Ä–µ–±—É–µ—Ç—Å—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

#### 3. Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- **Charging Started** - –∑–∞—Ä—è–¥–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å
  - –¢—Ä–∏–≥–≥–µ—Ä: `POST /api/v1/charging/start` (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞)
  - –î–∞–Ω–Ω—ã–µ: session_id, station_id, connector_id
- **Charging Completed** - –∑–∞—Ä—è–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
  - –¢—Ä–∏–≥–≥–µ—Ä: `POST /api/v1/charging/stop` (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
  - –î–∞–Ω–Ω—ã–µ: session_id, energy_kwh, amount (—Å—Ç–æ–∏–º–æ—Å—Ç—å)
- **Graceful degradation:** –æ—à–∏–±–∫–∏ push –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π flow
- **–§–∞–π–ª—ã:**
  - `backend/app/api/v1/charging/start.py:55-91`
  - `backend/app/api/v1/charging/stop.py:47-85`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

#### 4. Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ —Å—Ç–∞–Ω—Ü–∏–π
- **New Session** - –Ω–æ–≤–∞—è –∑–∞—Ä—è–¥–∫–∞ –Ω–∞—á–∞—Ç–∞ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏
  - –¢—Ä–∏–≥–≥–µ—Ä: `POST /api/v1/charging/start` (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞)
  - –î–∞–Ω–Ω—ã–µ: session_id, station_id, connector_id
- **Session Completed** - –∑–∞—Ä—è–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏
  - –¢—Ä–∏–≥–≥–µ—Ä: `POST /api/v1/charging/stop` (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
  - –î–∞–Ω–Ω—ã–µ: session_id, station_id, energy_kwh, amount (–¥–æ—Ö–æ–¥)
- **Helper —Ñ—É–Ω–∫—Ü–∏—è:** `get_station_owner_id(db, station_id)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è owner —á–µ—Ä–µ–∑ location JOIN
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üóÑÔ∏è Database (–ò–∑–º–µ–Ω–µ–Ω–∏—è –ë–î)

#### 5. –¢–∞–±–ª–∏—Ü–∞ push_subscriptions
```sql
CREATE TABLE public.push_subscriptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    user_type VARCHAR(10) NOT NULL CHECK (user_type IN ('client', 'owner')),
    endpoint TEXT NOT NULL,
    p256dh_key TEXT NOT NULL,
    auth_key TEXT NOT NULL,
    user_agent TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    last_used_at TIMESTAMPTZ,
    UNIQUE(user_id, endpoint)
);
```
- **–ò–Ω–¥–µ–∫—Å—ã:**
  - `idx_push_subscriptions_user` - (user_id, user_type)
  - `idx_push_subscriptions_endpoint` - (endpoint)
  - `idx_push_subscriptions_last_used` - (last_used_at)
- **RLS Policies:**
  - –ö–ª–∏–µ–Ω—Ç—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
  - –í–ª–∞–¥–µ–ª—å—Ü—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
  - Service role –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`
- **Cleanup —Ñ—É–Ω–∫—Ü–∏—è:** –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö subscriptions (>90 –¥–Ω–µ–π)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### ‚öôÔ∏è Configuration (–ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

#### 6. –ù–æ–≤—ã–µ environment variables
```bash
# VAPID Keys –¥–ª—è Web Push
VAPID_PRIVATE_KEY=<base64-encoded-key>
VAPID_PUBLIC_KEY=<base64-encoded-key>
VAPID_SUBJECT=mailto:noreply@evpower.kg

# Push Notifications Settings
PUSH_NOTIFICATIONS_ENABLED=true
PUSH_MAX_RETRIES=3
PUSH_TTL=86400  # 24 hours
```
- **–§–∞–π–ª—ã:**
  - `backend/.env.example` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  - `backend/app/core/config.py:129-137` - Settings class
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –í production VAPID keys –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –µ—Å–ª–∏ `PUSH_NOTIFICATIONS_ENABLED=true`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üîß Changed (–û–±–Ω–æ–≤–ª–µ–Ω–∏—è)

#### 7. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **requirements.txt:** –î–æ–±–∞–≤–ª–µ–Ω `pywebpush==1.14.0`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ë–ù–û–í–õ–ï–ù–û

#### 8. API Router
- **backend/app/api/v1/__init__.py**
  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω notifications router
  - –¢–µ–≥: "Push Notifications"
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ë–ù–û–í–õ–ï–ù–û

### üõ°Ô∏è Security (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

#### 9. Graceful Degradation Pattern
- –í—Å–µ push notification –≤—ã–∑–æ–≤—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `try-except`
- –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ warnings (`logger.warning`)
- Push failures –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π application flow
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (charging start/stop) –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- **–§–∞–π–ª—ã:**
  - `backend/app/services/push_service.py` - –≤—Å–µ –º–µ—Ç–æ–¥—ã
  - `backend/app/api/v1/charging/start.py:62-90`
  - `backend/app/api/v1/charging/stop.py:55-84`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

#### 10. Invalid Subscription Cleanup
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 410 Gone –∏–ª–∏ 404 Not Found –æ—Ç push service
- Subscription –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –ë–î
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤—ã—Ö subscriptions
- **–§–∞–π–ª:** `backend/app/services/push_service.py:108-116`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.3.0

- **–î–∞—Ç–∞:** 2025-11-18
- **–ù–æ–≤—ã—Ö features:** 4 (Push Notifications, API Endpoints, Client Events, Owner Events)
- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 7
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 4
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** ~850
- **–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~4 —á–∞—Å–∞
- **–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 52% (14/27 –∑–∞–¥–∞—á)

### üéØ Production Impact

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ Real-time push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è PWA
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞—Ä—è–¥–∫–µ
- ‚úÖ –í–ª–∞–¥–µ–ª—å—Ü—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–µ—Å—Å–∏—è—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö subscriptions
- ‚úÖ Graceful degradation - push –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π flow

**–ß—Ç–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö):**
- ‚è≥ Charging Error push notifications
- ‚è≥ Low Balance Warning
- ‚è≥ Payment Confirmed push
- ‚è≥ Station Offline detection

### üìù TODO Items

**–í –∫–æ–¥–µ:**
- `charging/start.py:78` - TODO: –ø–æ–ª—É—á–∏—Ç—å –∏–º—è —Å—Ç–∞–Ω—Ü–∏–∏ –∏–∑ –ë–î –≤–º–µ—Å—Ç–æ station_id
- `charging/stop.py:78` - TODO: –ø–æ–ª—É—á–∏—Ç—å –∏–º—è —Å—Ç–∞–Ω—Ü–∏–∏ –∏–∑ –ë–î –≤–º–µ—Å—Ç–æ station_id

**–î–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏–π:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≠–¢–ê–ü 5: Additional Events (Low Balance, Payment Confirmed, Station Offline)
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã API curl –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞–ø–∏—Å–∞—Ç—å BACKEND_API_REFERENCE.md —Å–µ–∫—Ü–∏—é –¥–ª—è Push Notifications

### üöÄ Deployment Notes –¥–ª—è v1.3.0

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**

1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VAPID keys:
   ```python
   from cryptography.hazmat.primitives.asymmetric import ec
   from cryptography.hazmat.primitives import serialization
   import base64

   private_key = ec.generate_private_key(ec.SECP256R1())
   public_key = private_key.public_key()

   private_bytes = private_key.private_bytes(
       encoding=serialization.Encoding.PEM,
       format=serialization.PrivateFormat.PKCS8,
       encryption_algorithm=serialization.NoEncryption()
   )
   public_bytes = public_key.public_bytes(
       encoding=serialization.Encoding.X962,
       format=serialization.PublicFormat.UncompressedPoint
   )

   vapid_private_key = base64.urlsafe_b64encode(private_bytes).decode()
   vapid_public_key = base64.urlsafe_b64encode(public_bytes).decode()
   ```

2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é:
   - –û—Ç–∫—Ä—ã—Ç—å Supabase Dashboard ‚Üí SQL Editor
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å `backend/migrations/003_add_push_notifications.sql`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `SELECT * FROM push_subscriptions LIMIT 1;`

3. –û–±–Ω–æ–≤–∏—Ç—å environment variables:
   ```bash
   VAPID_PRIVATE_KEY=<generated-key>
   VAPID_PUBLIC_KEY=<generated-key>
   VAPID_SUBJECT=mailto:noreply@evpower.kg
   PUSH_NOTIFICATIONS_ENABLED=true
   PUSH_MAX_RETRIES=3
   PUSH_TTL=86400
   ```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   docker-compose restart backend
   ```

6. Smoke testing:
   ```bash
   # 1. Check VAPID key
   curl https://ocpp.evpower.kg/api/v1/notifications/vapid-public-key

   # 2. Test push (requires JWT)
   curl -X POST https://ocpp.evpower.kg/api/v1/notifications/test \
     -H "Authorization: Bearer YOUR_JWT_TOKEN"
   ```

---

## [1.2.4] - 2025-11-03 - AUTH FIX üîß

### üî• Fixed (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)

#### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JWT HS256 –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Supabase Auth
- **–§–∞–π–ª—ã:**
  - `backend/app/core/config.py:12-14` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω SUPABASE_JWT_SECRET
  - `backend/app/core/auth_middleware.py:71-109` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è HS256 —Ç–æ–∫–µ–Ω–æ–≤
  - `backend/app/core/auth_middleware.py:125` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –æ–±—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–ß—Ç–æ –±—ã–ª–æ:**
  - –í–µ—Ä—Å–∏—è 1.2.3 —É–¥–∞–ª–∏–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É HS256 –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - Supabase Auth –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ HS256 —Ç–æ–∫–µ–Ω—ã (–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
  - –í—Å–µ authenticated API endpoints –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ 401 Unauthorized
  - Production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `SUPABASE_JWT_SECRET` –≤ config.py —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≥–∏–±—Ä–∏–¥–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: HS256 (Supabase) + RS256/ES256 (JWKS)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è HS256 —Ç–æ–∫–µ–Ω–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `SUPABASE_JWT_SECRET`
  - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (audience, issuer, options) –¥–ª—è –≤—Å–µ—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å exc_info –¥–ª—è debugging
  - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω auth_method = "jwt_hs256" –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –º–µ—Ç–æ–¥–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
  - ‚úÖ HS256 –±–µ–∑–æ–ø–∞—Å–µ–Ω –∫–æ–≥–¥–∞ JWT_SECRET —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ server-side (–Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É)
  - ‚úÖ Supabase –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–µ secrets (–¥–ª–∏–Ω–Ω—ã–µ, —Å–ª—É—á–∞–π–Ω—ã–µ)
  - ‚úÖ Secret –≤ environment variables, –Ω–µ hardcoded –≤ –∫–æ–¥–µ
  - ‚úÖ Supabase –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ JWT –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö endpoints
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ HS256 (Supabase), —Ç–∞–∫ –∏ RS256/ES256 (custom JWKS)
  - –ë–µ–∑ breaking changes –¥–ª—è frontend (—Ç–æ–∫–µ–Ω—ã –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å)
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–ø–æ–ª–Ω–∞—è –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å authenticated endpoints)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.2.4

- **–î–∞—Ç–∞:** 2025-11-03
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 1
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 2
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~45
- **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ~1 —á–∞—Å
- **Downtime –≤ production:** ~2 —á–∞—Å–∞ (–º–µ–∂–¥—É v1.2.3 deploy –∏ v1.2.4 hotfix)

### üéØ Production Impact

**–î–æ –≤–µ—Ä—Å–∏–∏ 1.2.4 (v1.2.3 –ø—Ä–æ–±–ª–µ–º–∞):**
- ‚ùå –í—Å–µ authenticated API endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 401
- ‚ùå POST /api/v1/balance/topup-qr ‚Üí 401
- ‚ùå POST /api/v1/charging/start ‚Üí 401
- ‚ùå GET /api/v1/station/status ‚Üí 401
- ‚ùå Mobile app –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ

**–ü–æ—Å–ª–µ –≤–µ—Ä—Å–∏–∏ 1.2.4:**
- ‚úÖ JWT HS256 —Ç–æ–∫–µ–Ω—ã –æ—Ç Supabase –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ authenticated endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ì–∏–±—Ä–∏–¥–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: HS256 + RS256/ES256
- ‚úÖ Mobile app –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ Security posture —Å–æ—Ö—Ä–∞–Ω–µ–Ω (JWT_SECRET server-side only)

### üìù Lessons Learned

1. **Platform Constraints:** Supabase Auth –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å JWT –∞–ª–≥–æ—Ä–∏—Ç–º - —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
2. **HS256 Security:** HS256 –±–µ–∑–æ–ø–∞—Å–µ–Ω –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ (secret –Ω–∞ server-side)
3. **Breaking Changes:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ authentication —Ç—Ä–µ–±—É—é—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ production deploy
4. **Hotfix Process:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ auth –ø—Ä–æ–±–ª–µ–º—ã —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ hotfix —Ä–µ–ª–∏–∑–∞

---

## [1.2.3] - 2025-11-03 - SECURITY HARDENING üîí

### üîí Security (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

#### 1. –£–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- **–§–∞–π–ª—ã:**
  - `backend/app/main.py:148-157` - —É–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ REDIS_URL
  - `backend/ocpp_ws_server/redis_manager.py:22-35` - —É–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ REDIS_URL —Å –ø–∞—Ä–æ–ª–µ–º
- **–ß—Ç–æ –±—ã–ª–æ:** Redis URL —Å –ø–∞—Ä–æ–ª—è–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–ª—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ production –ª–æ–≥–∞—Ö
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞—Ä–æ–ª—è (Yes/No)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ª–æ–≥–∏
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (—É—Ç–µ—á–∫–∞ credentials —á–µ—Ä–µ–∑ logs)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 2. –£–¥–∞–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JWT HS256 (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º)
- **–§–∞–π–ª—ã:**
  - `backend/app/core/auth_middleware.py:62-104` - —É–¥–∞–ª–µ–Ω–∞ –≤–µ—Ç–∫–∞ HS256
  - `backend/app/core/config.py:12` - —É–¥–∞–ª–µ–Ω SUPABASE_JWT_SECRET
- **–ß—Ç–æ –±—ã–ª–æ:** HS256 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç shared secret - –ø—Ä–∏ —É—Ç–µ—á–∫–µ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä—É–µ—Ç—Å—è –≤—Å—è —Å–∏—Å—Ç–µ–º–∞
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ RS256/ES256 —á–µ—Ä–µ–∑ JWKS
  - HS256 —Ç–æ–∫–µ–Ω—ã —è–≤–Ω–æ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π
  - –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è SUPABASE_JWT_SECRET –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤–º–µ—Å—Ç–æ shared secret
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –ø—Ä–∏ —É—Ç–µ—á–∫–µ secret)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ webhook endpoints
- **–§–∞–π–ª—ã:**
  - `backend/app/api/v1/payment/webhook.py:16-183` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è verify_webhook_ip
  - `backend/app/core/config.py:97-103` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ IP whitelist
- **–ß—Ç–æ –±—ã–ª–æ:** Webhook endpoints –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - **–£—Ä–æ–≤–µ–Ω—å 1:** IP whitelist –ø—Ä–æ–≤–µ—Ä–∫–∞ (ODENGI_WEBHOOK_IPS, OBANK_WEBHOOK_IPS)
  - **–£—Ä–æ–≤–µ–Ω—å 2:** Timestamp validation - –∑–∞—â–∏—Ç–∞ –æ—Ç replay attacks (–æ–∫–Ω–æ 5 –º–∏–Ω—É—Ç)
  - **–£—Ä–æ–≤–µ–Ω—å 3:** HMAC signature verification (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ production)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ config.py: ODENGI_WEBHOOK_SECRET –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ production
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Webhook –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏, replay attacks –∏ DDoS
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–ø–æ–¥–¥–µ–ª–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 4. CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ fail-safe
- **–§–∞–π–ª:** `backend/app/main.py:313-340`
- **–ß—Ç–æ –±—ã–ª–æ:**
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å wildcard (*) —Å allow_credentials=True (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–∞–º–∏)
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ production
  - –ù–µ—Ç fail-safe –¥–ª—è –ø—É—Å—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –Ø–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è CORS_ORIGINS –≤ production
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ wildcard (*) —Å allow_credentials –≤ production
  - Fail-safe: development defaults –µ—Å–ª–∏ CORS_ORIGINS –ø—É—Å—Ç–æ–π –≤ dev
  - –ü—Ä–∏–Ω—Ü–∏–ø least privilege: explicit allowed headers list
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** CORS —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üü° –°–†–ï–î–ù–ò–ô (–Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π CORS –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 5. –ü–µ—Ä–µ–Ω–æ—Å Rate Limiting –≤ Redis (horizontal scaling support)
- **–§–∞–π–ª—ã:**
  - `backend/app/core/security_middleware.py:16-213` - –¥–æ–±–∞–≤–ª–µ–Ω RedisRateLimiter
  - `backend/app/core/security_middleware.py:109-213` - –æ–±–Ω–æ–≤–ª–µ–Ω SecurityMiddleware
- **–ß—Ç–æ –±—ã–ª–æ:** In-memory rate limiting –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ horizontal scaling
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω RedisRateLimiter —Å sliding window —á–µ—Ä–µ–∑ Redis Sorted Sets
  - –¢—Ä–∏ —Ç–∏–ø–∞ –ª–∏–º–∏—Ç–æ–≤: default (60/min), critical (10/min), webhook (30/min)
  - Fallback –Ω–∞ in-memory limiter –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis (fail-open)
  - –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Redis pipeline
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ instances
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üü° –°–†–ï–î–ù–ò–ô (–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π rate limiting –ø—Ä–∏ scaling)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üìù Changed (–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

#### 6. –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config.py
- **–§–∞–π–ª:** `backend/app/core/config.py`
- **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
  - `WEBHOOK_IP_WHITELIST_ENABLED: bool` - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ IP whitelist
  - `ODENGI_WEBHOOK_IPS: str` - IP –∞–¥—Ä–µ—Å–∞ O!Dengi —Å–µ—Ä–≤–µ—Ä–æ–≤
  - `OBANK_WEBHOOK_IPS: str` - IP –∞–¥—Ä–µ—Å–∞ OBANK —Å–µ—Ä–≤–µ—Ä–æ–≤
  - `APP_ENV: str` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (development/staging/production)
- **–£–¥–∞–ª–µ–Ω–æ:**
  - `SUPABASE_JWT_SECRET` (–Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω, –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ JWKS)

### üìä Documentation

#### 7. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **AUDIT_SUMMARY.md:**
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª v1.2.3 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–æ—Ç–∞—Ü–∏–∏ Supabase —Ç–æ–∫–µ–Ω–∞
- **CHANGELOG.md:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è 1.2.3 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º security hardening

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.2.3

- **–î–∞—Ç–∞:** 2025-11-03
- **Security –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 5
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 6
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~350
- **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ~3 —á–∞—Å–∞
- **Security audit score:** 55% ‚Üí 85%+ (—Ä–∞—Å—á–µ—Ç–Ω–æ)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - ENV logging (credentials leak) ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
2. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - HS256 JWT (shared secret) ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
3. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - Webhook –±–µ–∑ –∑–∞—â–∏—Ç—ã ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
4. üü° **–°–†–ï–î–ù–ò–ô** - CORS –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
5. üü° **–°–†–ï–î–ù–ò–ô** - Rate limiting scaling ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**

### üéØ Production Impact

**–î–æ –≤–µ—Ä—Å–∏–∏ 1.2.3:**
- ‚ùå Redis credentials –≤ –ª–æ–≥–∞—Ö
- ‚ùå HS256 JWT - —Ä–∏—Å–∫ –ø–æ–ª–Ω–æ–π –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏
- ‚ùå Webhook endpoints –±–µ–∑ –∑–∞—â–∏—Ç—ã
- ‚ö†Ô∏è CORS wildcard —Å credentials
- ‚ö†Ô∏è In-memory rate limiting (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ scaling)

**–ü–æ—Å–ª–µ –≤–µ—Ä—Å–∏–∏ 1.2.3:**
- ‚úÖ –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã –æ—Ç secrets
- ‚úÖ –¢–æ–ª—å–∫–æ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è (RS256/ES256)
- ‚úÖ –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ webhook
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ Redis-based rate limiting —Å horizontal scaling support

---

## [1.2.2] - 2025-11-02 - CRITICAL PAYMENT & CHARGING FIXES üî•

### üî• Fixed (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

#### 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–∞—É—Ç–∞ invoice –ø–ª–∞—Ç–µ–∂–µ–π
- **–§–∞–π–ª—ã:**
  - `backend/app/schemas/ocpp.py:355` - –∏–∑–º–µ–Ω–µ–Ω–æ `invoice_lifetime_seconds: 600 ‚Üí 300`
  - `backend/app/api/v1/balance/topup.py:180` - –∏–∑–º–µ–Ω–µ–Ω–æ `invoice_lifetime_seconds=600 ‚Üí 300`
  - `backend/app/api/mobile.py:1839` - –∏–∑–º–µ–Ω–µ–Ω–æ `invoice_lifetime_seconds=600 ‚Üí 300`
- **–ß—Ç–æ –±—ã–ª–æ:** –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –∫–æ–¥–æ–º –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π (5 –º–∏–Ω vs 10 –º–∏–Ω)
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω —Ç–∞–π–º–∞—É—Ç invoice –Ω–∞ 5 –º–∏–Ω—É—Ç –≤–µ–∑–¥–µ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å QR –∫–æ–¥–æ–º)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï–¥–∏–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ QR –∫–æ–¥–∞ –∏ invoice = 5 –º–∏–Ω—É—Ç
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üü° –°–†–ï–î–ù–ò–ô (–ø—É—Ç–∞–Ω–∏—Ü–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ race condition –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞—Ç–µ–∂–µ–π
- **–§–∞–π–ª:** `backend/app/crud/ocpp_service.py:970-1006`
- **–ß—Ç–æ –±—ã–ª–æ:** Cleanup task –º–æ–≥ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂ (status='canceled') –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –ø—Ä–∏—Ö–æ–¥–æ–º webhook —Å approved
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `current_status != "approved"` –∏–∑ —É—Å–ª–æ–≤–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –¢–µ–ø–µ—Ä—å approved webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
  - –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ `existing_paid_amount is None`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ canceled‚Üíapproved transition
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–ª–∞—Ç–µ–∂–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ race condition –º–µ–∂–¥—É cleanup –∏ webhook
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–ø–æ—Ç–µ—Ä—è –¥–µ–Ω–µ–≥ –∫–ª–∏–µ–Ω—Ç–æ–≤)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 3. –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–±–µ–ª—è –∑–∞—Ä—è–¥–∫–∏
- **–§–∞–π–ª—ã:**
  - `backend/app/api/v1/charging/service.py:1400-1550` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `connection_timeout_minutes`
  - `backend/app/main.py:201-253` - –æ–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ scheduler —Å –Ω–æ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
- **–ß—Ç–æ –±—ã–ª–æ:** –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –∑–∞—Ä—è–¥–∫–∏ –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞–±–µ–ª—è —Å—Ä–µ–¥—Å—Ç–≤–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ 12 —á–∞—Å–æ–≤
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–π –±–µ–∑ OCPP —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (LEFT JOIN —Å ocpp_transactions)
  - –ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–π –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç —Å –ø–æ–ª–Ω—ã–º –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Å—Ä–µ–¥—Å—Ç–≤
  - –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "NO CONNECTION" vs "TOO LONG"
  - –î–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: –¥–ª–∏–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (12h) + –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (10 min)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ä–µ–¥—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª –∫–∞–±–µ–ª—å
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ 12 —á–∞—Å–æ–≤)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üìù Changed (–£–ª—É—á—à–µ–Ω–∏—è)

#### 4. –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å—à–∏—Ö —Å–µ—Å—Å–∏–π
- **–§–∞–π–ª:** `backend/app/api/v1/charging/service.py:1400-1550`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - Dual-check –ø–æ–¥—Ö–æ–¥: –¥–≤–∞ —Ç–∏–ø–∞ –∑–∞–≤–∏—Å—à–∏—Ö —Å–µ—Å—Å–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –°–µ—Å—Å–∏–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é > 12 —á–∞—Å–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –°–µ—Å—Å–∏–∏ –±–µ–∑ OCPP transaction > 10 –º–∏–Ω—É—Ç (–Ω–æ–≤–∞—è)
  - –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–µ—Å—Å–∏–π

### üìä Documentation

#### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **API-REFERENCE.md:**
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤: `invoice_lifetime_seconds: 600 ‚Üí 300`
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ invoice: "10 –º–∏–Ω—É—Ç ‚Üí 5 –º–∏–Ω—É—Ç"
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –ª–∏–º–∏—Ç—ã: "–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ invoice: 10 –º–∏–Ω—É—Ç ‚Üí 5 –º–∏–Ω—É—Ç"
- **PAYMENT-SYSTEMS.md:**
  - –£–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (5 –º–∏–Ω—É—Ç)
- **CHANGELOG.md:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è 1.2.2 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.2.2

- **–î–∞—Ç–∞:** 2025-11-02
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 3
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 6
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~100
- **–°—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~20
- **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ~2 —á–∞—Å–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - Race condition –≤ –ø–ª–∞—Ç–µ–∂–∞—Ö ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
2. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞–±–µ–ª—è ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
3. üü° **–°–†–ï–î–ù–ò–ô** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–∞—É—Ç–∞ invoice ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**

### üéØ Production Impact

**–î–æ –≤–µ—Ä—Å–∏–∏ 1.2.2:**
- ‚ùå –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –ø–ª–∞—Ç–µ–∂–µ–π –ø—Ä–∏ race condition
- ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ 12 —á–∞—Å–æ–≤ –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞–±–µ–ª—è
- ‚ö†Ô∏è –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ü–æ—Å–ª–µ –≤–µ—Ä—Å–∏–∏ 1.2.2:**
- ‚úÖ Race condition –∑–∞—â–∏—Ç–∞ - approved –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## [1.2.1] - 2025-11-01 - WEBHOOK RATE LIMITING üîí

### üîí Security (–£–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

#### 1. –î–æ–±–∞–≤–ª–µ–Ω rate limiting –¥–ª—è webhook endpoints
- **–§–∞–π–ª—ã:**
  - `backend/app/core/config.py:49` - –¥–æ–±–∞–≤–ª–µ–Ω `RATE_LIMIT_WEBHOOK_PER_MINUTE`
  - `backend/app/core/security_middleware.py:50-52, 83-95` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω webhook rate limiter
  - `backend/.env.example:45` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- **–ß—Ç–æ –±—ã–ª–æ:** Webhook endpoints `/payment/webhook` –±—ã–ª–∏ —É—è–∑–≤–∏–º—ã –∫ DDoS –∞—Ç–∞–∫–∞–º
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π rate limiter –¥–ª—è webhook (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IP-based limiting (–±–µ–∑ client_id) –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –ª–∏–º–∏—Ç–∞ —Å source IP
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `RATE_LIMIT_WEBHOOK_PER_MINUTE` environment variable
- **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ endpoints:**
  - `POST /api/v1/payment/webhook` (–æ—Å–Ω–æ–≤–Ω–æ–π)
  - `POST /payment/webhook` (legacy)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Ç DDoS –∞—Ç–∞–∫ –Ω–∞ webhook notifications
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üìù Documentation
- –û–±–Ω–æ–≤–ª–µ–Ω `.env.example` —Å –Ω–æ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `RATE_LIMIT_WEBHOOK_PER_MINUTE=30`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –æ –∑–∞—â–∏—Ç–µ webhook

---

## [1.2.0] - 2025-11-01 - SECURITY IMPROVEMENTS & OBANK DISABLED üîí

### üîí Security (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

#### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω timing attack –≤ station authentication
- **–§–∞–π–ª:** `backend/app/core/station_auth.py:63`
- **–ß—Ç–æ –±—ã–ª–æ:** Master API key –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è —á–µ—Ä–µ–∑ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `==`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `hmac.compare_digest()` –¥–ª—è constant-time —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –æ—Ç timing attacks –Ω–∞ master key
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üü° –°–†–ï–î–ù–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 2. HTTP fallback –¥–ª—è OBANK —É–¥–∞–ª–µ–Ω
- **–§–∞–π–ª:** `backend/app/services/obank_service.py:92-100`
- **–ß—Ç–æ –±—ã–ª–æ:** –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è HTTP fallback (MITM —Ä–∏—Å–∫)
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** HTTP fallback —É–¥–∞–ª–µ–Ω, —Ç–æ–ª—å–∫–æ HTTPS —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** PCI DSS Requirement 4.1 compliance
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üöß Changed (–ò–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

#### 3. OBANK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∞
- **–§–∞–π–ª—ã:** `config.py`, `h2h.py`, `token.py`, `webhook.py`
- **–ü—Ä–∏—á–∏–Ω–∞:** OBANK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–µ –≥–æ—Ç–æ–≤–∞ –¥–ª—è production
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `OBANK_ENABLED = false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–æ)
  - `PAYMENT_PROVIDER` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω —Å `OBANK` –Ω–∞ `ODENGI`
  - H2H –∏ Token endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `h2h_not_available` / `token_not_available`
  - OBANK webhook –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –µ—Å–ª–∏ `OBANK_ENABLED=false`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ webhook authentication
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ O!Dengi –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π (QR-–∫–æ–¥—ã)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

#### 4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ TODO –¥–ª—è OBANK
- **–§–∞–π–ª:** `webhook.py:97-100`
- **–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ OBANK:**
  1. IP whitelist –¥–ª—è OBANK —Å–µ—Ä–≤–µ—Ä–æ–≤
  2. SSL client certificate verification (mutual TLS)
  3. HMAC signature –ø—Ä–æ–≤–µ—Ä–∫–∞ webhook
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û –¥–ª—è production OBANK

### üìù Documentation

#### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `OBANK_ENABLED` –¥–æ–±–∞–≤–ª–µ–Ω –≤ config.py —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –æ–±—ä—è—Å–Ω—è—é—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- CHANGELOG.md –æ–±–Ω–æ–≤–ª–µ–Ω

---

## [1.1.1] - 2025-11-01 - CRITICAL SECURITY FIXES üîí

### üîí Security (–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

#### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞—Ä—è–¥–∫–∏
- **–§–∞–π–ª—ã:**
  - `backend/app/api/v1/charging/service.py:521-561`
  - `backend/app/api/v1/charging/stop.py:17-44`
- **–ß—Ç–æ –±—ã–ª–æ:** –ö–ª–∏–µ–Ω—Ç –º–æ–≥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á—É–∂—É—é —Å–µ—Å—Å–∏—é –∑–∞—Ä—è–¥–∫–∏, –∑–Ω–∞—è —Ç–æ–ª—å–∫–æ session_id
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `client_id` –≤ –º–µ—Ç–æ–¥ `stop_charging_session()`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if session_info['client_id'] != client_id: return access_denied`
  - –û–±–Ω–æ–≤–ª–µ–Ω endpoint `/charging/stop` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `client_id` –∏–∑ JWT/HMAC middleware
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —á—É–∂–∏—Ö —Å–µ—Å—Å–∏–π (403 Forbidden)
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Å—É–º–º –∏ —ç–Ω–µ—Ä–≥–∏–∏
- **–§–∞–π–ª:** `backend/app/api/v1/charging/service.py:50-81`
- **–ß—Ç–æ –±—ã–ª–æ:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `amount_som` –∏–ª–∏ `energy_kwh`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è: `if amount_som <= 0: return invalid_parameters`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è: `if energy_kwh <= 0: return invalid_parameters`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤: `amount_som <= 100,000 —Å–æ–º`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞: `1 <= connector_id <= 10`
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ—Ç–µ—Ä—å —á–µ—Ä–µ–∑ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–Ω–µ–≥ –≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∞–Ω–∏—è)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å—à–∏—Ö —Å–µ—Å—Å–∏–π
- **–§–∞–π–ª:** `backend/app/api/v1/charging/service.py:1452`
- **–ß—Ç–æ –±—ã–ª–æ:** –ú–µ—Ç–æ–¥ `check_and_stop_hanging_sessions()` –≤—ã–∑—ã–≤–∞–ª `stop_charging_session()` –±–µ–∑ `client_id`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è `client_id` –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Å—Å–∏–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å—à–∏—Ö —Å–µ—Å—Å–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üìù Changed

#### 4. –£–ª—É—á—à–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω—ã docstrings –¥–ª—è `start_charging_session()` –∏ `stop_charging_session()`
- –£–∫–∞–∑–∞–Ω—ã —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (Args) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (Returns)
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤–æ–∑–º–æ–∂–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (Raises)

---

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.1.1

- **–î–∞—Ç–∞:** 2025-11-01
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** 2
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 2
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** ~70
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~15
- **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ~30 –º–∏–Ω—É—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–µ—Å—Å–∏–∏ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
2. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Å—É–º–º ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**

### üéØ Production Readiness

**–ü–æ—Å–ª–µ –≤–µ—Ä—Å–∏–∏ 1.1.1:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: 0
- ‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∏—Å–∫–∏: 0
- ‚úÖ –ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø: –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: 100%

---

## [1.1.0] - 2025-11-01 - PRODUCTION READY üöÄ

### ‚úÖ –ì–û–¢–û–í –ö –ü–£–ë–õ–ò–ö–ê–¶–ò–ò –í APP STORE –ò GOOGLE PLAY

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –ë—ç–∫–µ–Ω–¥ –≥–æ—Ç–æ–≤ –∫ production.

---

### üîí Security (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

#### 1. JWT_SECRET —É–¥–∞–ª–µ–Ω (–∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤)
- **–§–∞–π–ª:** `backend/app/core/auth_middleware.py:63-66`
- **–ß—Ç–æ –±—ã–ª–æ:** –ü—Ä–∏ —É—Ç–µ—á–∫–µ `.env.production` –≤—Å–µ JWT —Ç–æ–∫–µ–Ω—ã —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç JWT_SECRET, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ JWKS endpoint
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–∫–µ–Ω—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –¥–∞–∂–µ –ø—Ä–∏ —É—Ç–µ—á–∫–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 2. OBANK_CERT_PASSWORD –±–æ–ª—å—à–µ –Ω–µ —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω
- **–§–∞–π–ª:** `backend/app/core/config.py:73`
- **–ß—Ç–æ –±—ã–ª–æ:** –ü–∞—Ä–æ–ª—å `"bPAKhpUlss"` –≤–∏–¥–µ–Ω –≤ –∫–æ–¥–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –£–±—Ä–∞–Ω default value, —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞—Ä–æ–ª—å –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 3. Timing attack –Ω–∞ API keys –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- **–§–∞–π–ª:** `backend/app/core/station_auth.py:91-94`
- **–ß—Ç–æ –±—ã–ª–æ:** –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `api_key != stored_api_key`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `hmac.compare_digest()` –¥–ª—è constant-time —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –æ—Ç timing attacks –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ API –∫–ª—é—á–µ–π —Å—Ç–∞–Ω—Ü–∏–π
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üü° –í–´–°–û–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 4. SSL verification –≤–∫–ª—é—á–µ–Ω –¥–ª—è OBANK
- **–§–∞–π–ª:** `backend/app/services/obank_service.py:143`
- **–ß—Ç–æ –±—ã–ª–æ:** `verify=False` - —É—è–∑–≤–∏–º–æ—Å—Ç—å –∫ MITM –∞—Ç–∞–∫–∞–º
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** `verify=True` –¥–ª—è production
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### üîß Fixed (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–∞–≥–æ–≤)

#### 5. Idempotency-Key –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –º–æ–±–∏–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º)
- **–§–∞–π–ª:** `backend/app/core/idempotency_middleware.py:50-53`
- **–ß—Ç–æ –±—ã–ª–æ:** Middleware —Ç—Ä–µ–±–æ–≤–∞–ª –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Idempotency-Key`, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ ‚Üí 400 –æ—à–∏–±–∫–∏
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è UUID –µ—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –º–æ–±–∏–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ app
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üî¥ –ë–õ–û–ö–ï–† (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ pending_deletion (GDPR compliance)
- **–§–∞–π–ª:** `backend/app/api/v1/charging/service.py:122-157`
- **–ß—Ç–æ –±—ã–ª–æ:** –ö–ª–∏–µ–Ω—Ç—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —É–¥–∞–ª–µ–Ω–∏—è –º–æ–≥–ª–∏ –Ω–∞—á–∏–Ω–∞—Ç—å –∑–∞—Ä—è–¥–∫–∏ –∏ –ø–æ–ø–æ–ª–Ω—è—Ç—å –±–∞–ª–∞–Ω—Å
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ `pending_deletion` –∏ `blocked` –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** GDPR compliance + –∑–∞—â–∏—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** üü° –í–´–°–û–ö–ò–ô (GDPR –Ω–∞—Ä—É—à–µ–Ω–∏–µ)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### ‚ö° Added (–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

#### 7. Auto-stop –∑–∞–≤–∏—Å—à–∏—Ö —Å–µ—Å—Å–∏–π –∑–∞—Ä—è–¥–∫–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–∏—Å–∫–æ–≤)
- **–§–∞–π–ª—ã:**
  - `backend/app/api/v1/charging/service.py:1308-1404` (–Ω–æ–≤—ã–π –º–µ—Ç–æ–¥)
  - `backend/app/main.py:190-242` (scheduler job)
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–π —Å—Ç–∞—Ä—à–µ 12 —á–∞—Å–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
  - –†–∞—Å—á–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –±–∞–ª–∞–Ω—Å–∞
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ—Ç–µ—Ä—å –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.1.0

- **–î–∞—Ç–∞:** 2025-11-01
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** 4
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–∞–≥–æ–≤:** 2
- **–ù–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:** 1
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 5
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~180
- **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ~1.5 —á–∞—Å–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. üî¥ **–ë–õ–û–ö–ï–†** - Idempotency-Key (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ) ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
2. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - JWT_SECRET –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
3. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - SSL verification –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
4. üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - OBANK –ø–∞—Ä–æ–ª—å –≤ –∫–æ–¥–µ ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
5. üü° **–í–´–°–û–ö–ò–ô** - Timing attack –Ω–∞ API keys ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
6. üü° **–í–´–°–û–ö–ò–ô** - GDPR compliance (pending_deletion) ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**
7. üü° **–í–´–°–û–ö–ò–ô** - –ó–∞–≤–∏—Å—à–∏–µ —Å–µ—Å—Å–∏–∏ (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ä–∏—Å–∫) ‚Üí **–ò–°–ü–†–ê–í–õ–ï–ù–û**

### üéØ Production Readiness

**–î–æ –≤–µ—Ä—Å–∏–∏ 1.1.0:**
- ‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: 4
- ‚ùå –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∏—Å–∫–∏: 1
- ‚ùå –ë–ª–æ–∫–µ—Ä—ã —Ä–µ–ª–∏–∑–∞: 1
- ‚ùå GDPR compliance: 50%

**–ü–æ—Å–ª–µ –≤–µ—Ä—Å–∏–∏ 1.1.0:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: 0
- ‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∏—Å–∫–∏: 0
- ‚úÖ –ë–ª–æ–∫–µ—Ä—ã —Ä–µ–ª–∏–∑–∞: 0
- ‚úÖ GDPR compliance: 100%

---

### üöÄ Deployment Notes –¥–ª—è v1.1.0

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   OBANK_CERT_PASSWORD=<–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_–ø–∞—Ä–æ–ª—å>
   ```

2. –£–±—Ä–∞—Ç—å `SUPABASE_JWT_SECRET` –∏–∑ `.env.production` (–µ—Å–ª–∏ –µ—Å—Ç—å)

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   docker-compose restart backend
   ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `"üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å—à–∏—Ö —Å–µ—Å—Å–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∞"`

---

## [1.0.0] - 2025-10-31

### Security (–†–∞–Ω–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏) üîí

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **backend/app/core/auth_middleware.py**
  - –î–æ–±–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints (locations, station status)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è `/api/v1/*`
  - –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
  - –ü—É–±–ª–∏—á–Ω—ã–µ endpoints:
    - `GET /api/v1/locations` - —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π
    - `GET /api/v1/locations/{id}` - –¥–µ—Ç–∞–ª–∏ –ª–æ–∫–∞—Ü–∏–∏
    - `GET /api/v1/station/status/{station_id}` - —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–Ω—Ü–∏–∏
  - **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### –£—Å–∏–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- **backend/app/api/v1/charging/schemas.py**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è `station_id`: —Ç–æ–ª—å–∫–æ `[A-Z0-9-]`, max 50 —Å–∏–º–≤–æ–ª–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è `connector_id`: 1-10
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è `session_id`: —Ç–æ–ª—å–∫–æ alphanumeric + –¥–µ—Ñ–∏—Å
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `amount_som`: max 100,000 KGS
  - **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å SQL injection —á–µ—Ä–µ–∑ –Ω–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (PCI DSS)
- **backend/app/schemas/ocpp.py** - `H2HPaymentRequest`
  - `card_pan`: —Å—Ç—Ä–æ–≥–∞—è regex –≤–∞–ª–∏–¥–∞—Ü–∏—è `^\d{12,19}$` (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  - `card_name`: –≤–∞–ª–∏–¥–∞—Ü–∏—è `^[A-Z\s]+$` (—Ç–æ–ª—å–∫–æ –∑–∞–≥–ª–∞–≤–Ω—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã)
  - `card_cvv`: —Å—Ç—Ä–æ–≥–∞—è regex –≤–∞–ª–∏–¥–∞—Ü–∏—è `^\d{3,4}$` (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  - `email`: regex –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ email
  - `phone_number`: –≤–∞–ª–∏–¥–∞—Ü–∏—è `^\+?\d{10,15}$`
  - `description`: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ max 500 —Å–∏–º–≤–æ–ª–æ–≤
  - **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø–ª–∞—Ç—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É
  - **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### –£–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (PCI DSS / GDPR)
- **backend/app/services/obank_service.py**
  - –£–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç (–¥–∞–∂–µ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
  - –£–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ CVV (–±—ã–ª–æ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–æ, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è)
  - –£–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ email, phone, holder_name (PII –¥–∞–Ω–Ω—ã–µ)
  - –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: `client_id`, `amount`, `has_card_data`, `has_email`, `has_phone`
  - **–†–∏—Å–∫ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –£—Ç–µ—á–∫–∞ PII/PCI –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ª–æ–≥–∏
  - **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### Changed

#### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–ª–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **exported_functions.sql** - `change_balance_secure()`
  - –§—É–Ω–∫—Ü–∏—è —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `FOR UPDATE` lock –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions
  - –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å –±–∞–ª–∞–Ω—Å–æ–º —Å—Ç—Ä–æ–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - **–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ü–†–ê–í–ò–õ–¨–ù–û

### Documentation

#### –°–æ–∑–¥–∞–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **RULES.md**
  - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥ backend (Python/FastAPI)
  - 15 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
  - –ß–µ–∫–ª–∏—Å—Ç—ã –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –∏ –∫–æ–º–º–∏—Ç–∞–º–∏
  - –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
  - –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ä–µ–≤–∏–∑–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (22 —Ç–∞–±–ª–∏—Ü—ã, 50+ —Ñ—É–Ω–∫—Ü–∏–π, 75+ RLS –ø–æ–ª–∏—Ç–∏–∫)
- –í—ã—è–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –°–æ—Å—Ç–∞–≤–ª–µ–Ω –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π v1.0.0

**–î–∞—Ç–∞**: 2025-10-31
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 4
**–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ**: 4
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ**: ~150

---

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç [Semantic Versioning](https://semver.org/):
- **MAJOR** –≤–µ—Ä—Å–∏—è –ø—Ä–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö API
- **MINOR** –≤–µ—Ä—Å–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
- **PATCH** –≤–µ—Ä—Å–∏—è –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 1.3.0 ‚úÖ PRODUCTION READY (PUSH NOTIFICATIONS)

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `release-backend/` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API, OCPP, –ø–ª–∞—Ç–µ–∂–µ–π

**Production Status:** –°–º. `AUDIT_SUMMARY.md` –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è**: ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
